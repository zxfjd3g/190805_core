<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>异步编程3: 订阅与发布_事件总线</title>
</head>
<body>
  <script>
    /* 
    1. 订阅与发布
     */
    // 订阅消息
    PubSub.subscribe('add', (msg, data) => {/* 处理消息 */})
    const token = PubSub.subscribe('addd', (msg, data) => {/* 处理消息 */})
    // 发布消息
    PubSub.publish('add', '数据')
    // 取消订阅
    PubSub.unsubscribe(token)

    /* 
    2. 全局事件总线
    */
    // 绑定全局事件监听
    GlobalEventBus.on('add', (data) => {/* 处理事件 */})
    GlobalEventBus.on('add', (data) => {/* 处理事件 */})
    // 分发事件
    GlobalEventBus.emit('add', '数据')
    // 解除事件绑定
    GlobalEventBus.off('add')
  </script>
</body>
</html>